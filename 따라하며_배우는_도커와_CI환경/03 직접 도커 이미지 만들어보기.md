# 도커 이미지 생성 순서
![스크린샷 2022-07-20 오후 2 56 23](https://user-images.githubusercontent.com/32320659/179924360-6010a18c-c7a6-4bc8-ac54-43547c59db18.png)

## 도커 파일 작성
### 도커 파일(Dockerfile)이란?
도커 이미지를 만들기 위한 설정 파일이며, 컨테이너가 어떻게 행동해야 하는지에 대한 설정들을 정의해 주는 곳

### 도커 파일 만드는 순서
1. 베이스 이미지를 명시해준다.
2. 추가적으로 필요한 파일을 다운받기 위한 몇가지 명령어를 명시해준다.
3. 컨테이너 시작 시 실행될 명령어를 명시해준다.

### 베이스 이미지란?
도커 이미지는 여러개의 레이어로 되어있다. 그 중에서 베이스 이미지는 이 이미지의 기반이 되는 부분이다.
![스크린샷 2022-07-20 오후 3 14 02](https://user-images.githubusercontent.com/32320659/179924438-726822ba-4ee5-449e-bfc5-614927491ec0.png)

``` dockerfile
# 베이스 이미지 명시
FROM [베이스 이미지 이름]

# 이미지 생성 전 수행할 명령어
RUN [명령어]

# 컨테이너 실행 시 수행할 명령어
COMMAND [ "명령어" ]
```

## 도커 이미지 만들기
도커 파일이 있는 위치로 이동해 아래 명령어로 이미지를 만든다.

``` bash
docker build .
```

![스크린샷 2022-07-20 오후 4 12 31](https://user-images.githubusercontent.com/32320659/179924502-9374b3e4-827c-43a2-a40d-0a11aa639f4f.png)

### build 과정 설명
* Step 1/2
    * alpine 이미지 가져오기   a24bb\~  는 alpine 이미지 아이디
* Step 2/2
    * 임시 컨테이너 생성 후 그 컨테이너에 시작 시 사용할 명령어 포함시키기.
    * 그런 후 방금 생성 한 임시 컨테이너를 지우고  새로운 이미지 만들기

### Step 2/2 자세히 보기
Step 2에 보면 임시 컨테이너를 생성하고 무언가를 하고 다시 지우는데 왜 그렇게 하는 걸까 ?
![스크린샷 2022-07-20 오후 4 14 29](https://user-images.githubusercontent.com/32320659/179924561-b60ea563-66e2-4210-ad1e-abf044b8a70a.png)
![스크린샷 2022-07-20 오후 4 14 43](https://user-images.githubusercontent.com/32320659/179924577-92188b35-a303-432e-8e78-5a7390b4e8f2.png)


### 결론
베이스 이미지에서 다른 종속성이나 새로운 커맨드를 추가할 때는 임시 컨테이너를 만든 후 그 컨테이너를 토대로 새로운 이미지를 만든다. 그리고 그 임시 컨테이너는 지워준다.

![스크린샷 2022-07-20 오후 4 16 10](https://user-images.githubusercontent.com/32320659/179924595-c6b67d34-8167-468f-b119-f9713fa2bd94.png)

## 이미지에 기억하기 쉬운 이름 주기
```bash
docker build -t [Docker Hub ID]/[저장소/프로젝트명]:[버전] .
```
